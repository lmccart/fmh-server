<!DOCTYPE html>
<html lang="en">
<head>
  <title>#FOLLOWMYHEART</title>
  <meta charset="UTF-8" />
  <script type="text/javascript" src="lib/verlet-1.0.0.min.js"></script>
  <script data-main="app" src="lib/jquery.js"></script>
  <script>
  $(document).ready(function() {
    var data;
    var ind = 0;
    var start_time;
    var total_time;

    $.getJSON('hr.json', function(d, error) {
      data = d;

      start_time = data[0].timestamp;
      total_time = data[data.length-1].timestamp - start_time;

      updateHR();
    });


    setInterval(updateHR, 1000);

    function updateHR() {

      var offset = new Date().getTime()%total_time;

      for (var i=ind; i<data.length; i++) {
        if (data[i].timestamp < offset + start_time) {
          ind = i;
          i++;
        } else {
          break;
        }
      }
      
      $('#hr').html(data[ind].hr);
    }
  });
  </script>
  <style>
    body, html {
      text-align: center;
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(#ff73d6, #fbdeff);
      font-family: sans-serif;
      font-size: 60px;
      color: white;
    }
  </style>
</head>
<body>
<canvas id="scratch" style="width: 800px; height: 500px;"></canvas>
<script type="text/javascript" src="lib/heart.js"></script>
<p>#FOLLOWMYHEART: <span id='hr'>0</span></p>
</body>
</html>
